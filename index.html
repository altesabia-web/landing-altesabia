<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Áltesabia</title>

  <!-- Tipografías -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Header / Logo -->
  <header class="site-header">
    <div class="container">
      <img src="assets/logo.png" alt="Logo Áltesabia" class="logo">
      <h1 class="sr-only">Áltesabia - Terapia holística</h1>
    </div>
  </header>

  <!-- Servicios -->
  <main>
    <section id="servicios" class="section servicios">
      <div class="container">
        <h2 class="section-title">Servicios</h2>

        <div class="tarjetas">
          <article class="tarjeta">
            <img src="assets/mindfulness.jpg" alt="Mindfulness" class="foto-servicio">
            <img src="assets/icons/mindfulness.svg" alt="Icono Mindfulness" class="icono">
            <h3>Sesión Mindfulness</h3>
            <p>(online/virtual) — 35 min · S/50</p>
          </article>

          <article class="tarjeta">
            <img src="assets/banos-relajantes.jpg" alt="Baño relajante" class="foto-servicio">
            <img src="assets/icons/banos-relajantes.svg" alt="Icono baño relajante" class="icono">
            <h3>Baño de Hierbas Relajante</h3>
            <p>2 infusiones + 2 inciensos · S/25 (envío aparte)</p>
          </article>

          <article class="tarjeta">
            <img src="assets/banos-dormir.jpg" alt="Baño para dormir" class="foto-servicio">
            <img src="assets/icons/banos-dormir.svg" alt="Icono baño dormir" class="icono">
            <h3>Baño de Hierbas para Dormir</h3>
            <p>2 infusiones + 2 inciensos · S/25 (envío aparte)</p>
          </article>

          <article class="tarjeta">
            <img src="assets/terapia-holistica.jpg" alt="Terapia holística" class="foto-servicio">
            <img src="assets/icons/terapia-holistica.svg" alt="Icono terapia holística" class="icono">
            <h3>Terapia Holística</h3>
            <p>(online/virtual) · 4 sesiones S/250 · 6 sesiones S/350</p>
            <p class="muted">Un espacio de terapia, meditación y orientación para sanar cuerpo y mente.</p>
          </article>

          <article class="tarjeta especial">
            <span class="badge">Recomendado</span>
            <img src="assets/sesion-personalizada.jpg" alt="Sesión personalizada" class="foto-servicio">
            <img src="assets/icons/sesion-personalizada.svg" alt="Icono sesión personalizada" class="icono">
            <h3>Sesión Personalizada</h3>
            <p>S/70</p>
            <p class="muted">Orientación en tema específico y aclaración de objetivos.</p>
          </article>

          <article class="tarjeta">
            <img src="assets/duelo.jpg" alt="Terapia de duelo" class="foto-servicio">
            <img src="assets/icons/duelo.svg" alt="Icono duelo" class="icono">
            <h3>Terapia de Duelo</h3>
            <p>(online/virtual) · 6 sesiones S/350</p>
            <p class="muted">Acompañamiento y guía a través de las etapas del duelo.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- Testimonios -->
    <section id="testimonios" class="section testimonios">
      <div class="container">
        <h2 class="section-title">Lo que dicen nuestras clientas</h2>
        <blockquote>“Al terminar mis sesiones me sentí liberada.” — N.V.</blockquote>
        <blockquote>“Siento que ahora puedo tomar de nuevo el rumbo de mi vida, ya no tengo miedo empezar algo nuevo.” — T.P.</blockquote>
        <blockquote>“Me he sentido acompañada, no sabes cuánto necesitas de este tiempo para ti hasta que lo experimentas.” — M.V.</blockquote>
      </div>
    </section>

    <!-- Contacto -->
    <section id="contacto" class="section contacto">
      <div class="container">
        <h2 class="section-title">Reserva tu experiencia</h2>

        <form id="contact-form" action="https://formspree.io/f/xvgbjrvk" method="POST" autocomplete="on">
          <label for="nombre">Nombre</label>
          <input id="nombre" name="nombre" type="text" required>

          <label for="correo">Correo</label>
          <input id="correo" name="email" type="email" required>

          <label for="servicio">Servicio</label>
          <select id="servicio" name="servicio" required>
            <option value="">Selecciona...</option>
            <option>Terapia Holística - 4 sesiones (S/250)</option>
            <option>Terapia Holística - 6 sesiones (S/350)</option>
            <option>Sesión Personalizada (S/70)</option>
            <option>Mindfulness - 35 min (S/50)</option>
            <option>Baño Relajante (S/25)</option>
            <option>Baño Dormir (S/25)</option>
            <option>Terapia de Duelo - 6 sesiones (S/350)</option>
          </select>

          <label for="mensaje">Mensaje</label>
          <textarea id="mensaje" name="mensaje" rows="4"></textarea>

          <div id="form-feedback" role="status" aria-live="polite" class="feedback" hidden></div>

          <button id="submit-btn" type="submit" class="btn-cta">Enviar</button>
        </form>
      </div>
    </section>
  </main>

  <!-- Popup (controlado por JS) -->
  <div id="popup" class="popup" aria-hidden="true">
    <div class="popup-inner" role="dialog" aria-modal="true" aria-labelledby="popup-text">
      <button class="popup-close" id="popup-close" aria-label="Cerrar">✕</button>
      <p id="popup-text">Gracias — tu mensaje fue enviado.</p>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <p class="disclaimer">© 2025 Áltesabia</p>
      <p class="frase">
        Que tu corazón lata fuerte
        <span class="heart" aria-hidden="true">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="heart-svg">
            <path d="M12 20s-6.5-4.35-9-7.03C-0.5 9.69 3.2 4.5 7.5 6.5 9.2 7.3 10 9 12 11c2-2 2.8-3.7 4.5-4.5 4.3-2 8 3.19 4.5 6.47C18.5 15.65 12 20 12 20z"
              stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
          </svg>
        </span>
      </p>
    </div>
  </footer>

  <!-- SCRIPT: muestra popup a los 2s y envía en background -->
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById('contact-form');
    const popup = document.getElementById('popup');
    const popupText = document.getElementById('popup-text');
    const popupClose = document.getElementById('popup-close');
    const feedback = document.getElementById('form-feedback');
    const submitBtn = document.getElementById('submit-btn');

    if (!form) return;

    // Mostrar / ocultar popup
    const showPopup = (text) => {
      if (!popup) return;
      popupText.textContent = text || '';
      popup.setAttribute('aria-hidden', 'false');
    };
    const hidePopup = () => {
      if (!popup) return;
      popup.setAttribute('aria-hidden', 'true');
    };

    // Cerrar con botón, clic fuera o Esc
    if (popupClose) popupClose.addEventListener('click', hidePopup);
    window.addEventListener('click', (ev) => {
      if (ev.target === popup) hidePopup();
    });
    window.addEventListener('keydown', (ev) => {
      if (ev.key === 'Escape') hidePopup();
    });

    form.addEventListener('submit', (e) => {
      e.preventDefault();

      // Validación nativa
      if (!form.checkValidity()) {
        form.reportValidity();
        return;
      }

      // Bloquear botón
      if (submitBtn) {
        submitBtn.disabled = true;
        submitBtn.setAttribute('aria-busy', 'true');
        submitBtn.textContent = 'Enviando...';
      }

      // Mostrar "Enviando..." en popup
      showPopup('Enviando mensaje...');

      // Cambiar a "Gracias..." tras 2s aunque el envío siga
      const thanksTimer = setTimeout(() => {
        popupText.textContent = 'Gracias — tu mensaje fue enviado.';
      }, 2000);

      // Envío en background (fetch)
      (async () => {
        try {
          const formData = new FormData(form);
          const response = await fetch(form.action, {
            method: form.method || 'POST',
            body: formData,
            headers: { Accept: 'application/json' }
          });

          if (!response.ok) {
            // Si formspree devuelve error, mostrar mensaje del servidor si existe
            let msg = 'No se pudo enviar el formulario. Intenta de nuevo.';
            try {
              const json = await response.json();
              if (json && json.errors && Array.isArray(json.errors)) {
                msg = json.errors.map(x => x.message).join(' ');
              } else if (json && json.message) {
                msg = json.message;
              }
            } catch (_) {}
            clearTimeout(thanksTimer);
            popupText.textContent = msg;
          } else {
            // Envío OK: limpiamos formulario (pero dejamos popup mostrado)
            form.reset();
          }
        } catch (err) {
          // Error de conexión / fetch
          clearTimeout(thanksTimer);
          popupText.textContent = 'Error de conexión. Revisa tu internet e intenta nuevamente.';
          console.error('Fetch error:', err);
        } finally {
          // reactivar botón tras 1s para que no sean clics inmediatos
          setTimeout(() => {
            if (submitBtn) {
              submitBtn.disabled = false;
              submitBtn.removeAttribute('aria-busy');
              submitBtn.textContent = 'Enviar';
            }
          }, 1000);
          // auto-cerrar popup 4s después de mostrar el "Gracias"
          setTimeout(() => {
            hidePopup();
          }, 4000);
        }
      })();
    });
  });
  </script>

</body>
</html>


